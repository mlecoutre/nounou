<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <title>Nounou app - run</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="../css/jquery-ui-1.9.1.custom.min.css" type="text/css"/>
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/custom.css" rel="stylesheet">
</head>
<body>
<script src="../js/jquery-1.8.2.js"></script>
<script src="../js/jquery-ui-1.9.1.custom.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">

            <a class="brand" href="/" data-i18n="commons:navbar.title"></a>


            <ul class="nav">
                <li><a href="/" data-i18n="commons:navbar.home"></a></li>
                <li><a href="/about" data-i18n="commons:navbar.about"></a></li>
                <li><a href="#contact" data-i18n="commons:navbar.contact"></a></li>
                <li class="dropdown">
                    <a href="#" id="drop2" role="button" class="dropdown-toggle" data-toggle="dropdown">Actions<b
                            class="caret"></b></a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="drop2">
                        <li><a tabindex="-1" href="/registration" data-i18n="commons:navbar.registration-title"></a>
                        </li>
                        <li><a tabindex="-1" href="/run" data-i18n="commons:navbar.run-title"></a></li>
                        <li><a tabindex="-1" href="/report" data-i18n="commons:navbar.report-title"></a></li>
                    </ul>
                </li>
            </ul>

            <p class="navbar-text pull-right" id="authBox">

            </p>

            <p class="navbar-text pull-right hide" id="loadingIndicator">
                <img src="../img/ajax-loader.gif"/>
            </p>

            <p class="navbar-text pull-right hide" id="authBox_request">
                <input class="span2" type="text" id="uid" placeholder="Email">
                <input class="span2" type="password" id="password" placeholder="Password">
                <button type="submit" class="btn sign-in" id="signIn" data-i18n="commons:auth.signin"></button>
            </p>
            <!--/.nav-collapse -->
        </div>
    </div>
</div>

<div class="container">

    <p>&nbsp;</p><br/>

    <h2 class="run" data-i18n="run.title"></h2>

    <ul class="nav nav-tabs run" id="runTab">
        <li class="active"><a href="#live" data-i18n="run.tab.live"></a></li>
        <li><a href="#update" data-i18n="run.tab.update"></a></li>
    </ul>


    <div class="tab-content">
        <div class="tab-pane active" id="live"><br/>

            <div class="row">
                <div class="span4 run">

                    <p data-i18n="run.live.description"></p>
                    <input type="hidden" id="appointmentId"/>
                    <label data-i18n="run.commons.user"></label>
                    <select id="userId">
                    </select>
                    <label data-i18n="run.commons.arrival-date"></label>
                    <input type="text" id="arrivalDate" placeholder="Arrival date time">
                    <label data-i18n="run.commons.departure-date"></label>
                    <input type="text" id="departureDate" placeholder="Departure date time">

                    <div id="kidName">

                    </div>

                    <p><a class="btn btn-primary large-button" id="goLive" data-i18n="run.live.button-go"></a></p>

                </div>

                <div id="last5" class="span8">
                </div>
            </div>
        </div>

        <div class="tab-pane" id="update">
            <div class="row">
                <div class="span4">
                    <div id="editUpdate" class="hide run">
                        <input type="hidden" id="editAppointmentId"/>
                        <label data-i18n="run.update.arrival-user"></label>
                        <select id="editArrivalUserId">
                        </select>
                        <label data-i18n="run.commons.arrival-date"></label>
                        <input type="text" id="editArrivalDate" placeholder="Arrival date time">
                        <label data-i18n="run.update.departure-user"></label>
                        <select id="editDepartureUserId">
                        </select>
                        <label data-i18n="run.commons.departure-date"></label>
                        <input type="text" id="editDepartureDate" placeholder="Departure date time">
                        <label data-i18n="run.commons.kids"></label>
                        <div id="editKids">

                        </div>
                        <div>
                        <a class="btn btn-primary" id="editSave" data-i18n="commons:button.save"></a>
                        <a class="btn btn-primary" id="editCancel" data-i18n="commons:button.cancel"></a>
                        </div>
                    </div>
                </div>
                <div class="span8 run">
                    <legend data-i18n="run.search.legend"></legend>
                    <label data-i18n="run.search.label"></label>

                    <p><select id="searchDate">
                        <option value="currentWeek" selected="true" data-i18n="run.search.options.current-week"></option>
                        <option value="lastWeek" data-i18n="run.search.options.last-week"></option>
                        <option value="currentMonth" data-i18n="run.search.options.current-month"></option>
                        <option value="prevMonth" data-i18n="run.search.options.previous-month"></option>
                        <option id="other" data-i18n="run.search.options.other"></option>
                    </select>
                        <a class="btn" id="search" data-i18n="run.search.search-button"></a></p>
                    <hr/>
                    <div id="appointmentResultList">

                    </div>
                </div>

            </div>
        </div>
    </div>


    <hr>
    <div class="log"></div>
    <footer>
        <p>&copy; Mat 2012</p>
    </footer>

</div>
<!-- /container -->

<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->

<script src="../js/jquery.json-2.3.js"></script>
<script src="../js/i18next-1.5.8.min.js"></script>
<script src="../js/jquery.validate-1.10.0.min.js"></script>
<script src="../js/jquery.maskedinput-1.3.min.js"></script>
<script src="../js/additional-methods-1.10.0.min.js"></script>
<script src="../js/mustache.js"></script>
<script src="../js/run.js"></script>
<script src="../js/auth.js"></script>
<script src="../js/utilities.js"></script>

<script type="text/x-template" id="user-template">
    <option value="{{userId}}">{{firstName}}</option>
</script>

<script type="text/x-template" id="kid-appointment-template">
    {{#.}}
    <div data-target="{{childId}}" class="liveKid">
         <img src="{{pictureUrl}}" style="width:50px; height:50px;" /><br/>{{firstName}}
    </div>
    {{/.}}
</script>

<script type="text/x-template" id="last-appointments-template">
    <legend class="last5-template" data-i18n="run.last5.legend"></legend>
    <table class="table table-striped last5-template" id="lastAppointments">
        <thead>
        <tr>
            <th data-i18n="run.commons.arrival-user"></th>
            <th data-i18n="run.commons.arrival-date"></th>
            <th data-i18n="run.commons.departure-user"></th>
            <th data-i18n="run.commons.departure-date"></th>
            <th data-i18n="run.commons.kids"></th>
            <th data-i18n="run.commons.duration"></th>
        </tr>
        </thead>
        <tbody>
        {{#.}}
        <tr>
            <td>{{arrivalUserName}}</td>
            <td>{{arrivalDate}}</td>
            <td>{{departureUserName}}</td>
            <td>{{departureDate}}</td>
            <td>{{#children}}
                <img src="{{pictureUrl}}" class="small-picture" alt={{firstName}}/>
                {{/children}}
            </td>
            <td>{{duration}}</td>
        </tr>
        {{/.}}
        </tbody>
    </table>


</script>
<script type="text/x-template" id="appointments-template">
    <table class="table table-striped appointmentsContent">
        <thead>
        <tr>
            <th data-i18n="run.commons.arrival-user"></th>
            <th data-i18n="run.commons.arrival-date"></th>
            <th data-i18n="run.commons.departure-user"></th>
            <th data-i18n="run.commons.departure-date"></th>
            <th data-i18n="run.commons.kids"></th>
            <th data-i18n="run.commons.edit"></th>
        </tr>
        </thead>
        <tbody>
        {{#.}}
        <tr>
            <td>{{arrivalUserName}}</td>
            <td>{{arrivalDate}}</td>
            <td>{{departureUserName}}</td>
            <td>{{departureDate}}</td>
            <td>{{#children}}
                <img src="{{pictureUrl}}" class="small-picture" alt={{firstName}}/>
                {{/children}}
            </td>
            <td><a class="edit" data-target="{{appointmentId}}" href="#"><i class="icon-edit"></i></a>
                <a class="del" data-target="{{appointmentId}}" href="#"><i class="icon-trash"></i></a></td>
        </tr>
        {{/.}}
        </tbody>
    </table>
</script>
</body>
</html>